<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Checkâ€‘In</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#ffffff" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; max-width: 560px; margin: 0 auto; padding: 16px; line-height: 1.4; }
    header { display:flex; justify-content:space-between; align-items:center; }
    .card { border:1px solid #e5e5e5; border-radius:14px; padding:16px; margin-top:12px; }
    label { display:block; margin:10px 0 4px; font-weight:600; }
    input[type=range]{ width:100%; }
    textarea { width:100%; height:96px; }
    button { padding:12px 16px; border:0; border-radius:10px; margin-top:12px; cursor:pointer; }
    nav { display:flex; gap:8px; margin-top:8px; }
    .muted { color:#666; font-size:0.9em; }
    .row { display:flex; gap:8px; align-items:center; }
    .row output { width:2ch; text-align:center; }
    .list { margin:0; padding:0; list-style:none; }
    .list li { padding:10px 0; border-bottom:1px dashed #ddd; }
    .right { text-align:right; }
    .toggle { display:flex; align-items:center; gap:8px; }
    .btn-row { display:flex; flex-wrap:wrap; gap:8px; }
    .center { text-align:center; }
    .pin { font-size:1.2rem; letter-spacing: 0.4ch; text-align:center; width:100%; padding:10px; }
  </style>
</head>
<body>
  <header>
    <h1>Daily Checkâ€‘In</h1>
    <nav>
      <button id="tab-checkin">Checkâ€‘in</button>
      <button id="tab-history">History</button>
      <button id="tab-settings">Settings</button>
    </nav>
  </header>

  <!-- Passcode screens -->
  <section id="screen-pass-setup" class="card" hidden>
    <h2>Set a 4â€‘digit passcode</h2>
    <input id="pin1" class="pin" inputmode="numeric" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
    <label>Confirm passcode</label>
    <input id="pin2" class="pin" inputmode="numeric" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
    <button id="savePass">Save passcode</button>
    <div id="passMsg" class="muted"></div>
  </section>

  <section id="screen-pass-unlock" class="card" hidden>
    <h2>Enter passcode to unlock</h2>
    <input id="pinUnlock" class="pin" inputmode="numeric" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
    <button id="unlockBtn">Unlock</button>
    <div id="unlockMsg" class="muted"></div>
  </section>

  <!-- Main app screens -->
  <section id="screen-checkin" class="card" hidden>
    <div class="muted" id="now"></div>
    <label>Physical (1â€“5)</label>
    <div class="row">
      <input type="range" id="physical" min="1" max="5" value="3" oninput="phOut.value=this.value">
      <output id="phOut">3</output>
    </div>

    <label>Emotional (1â€“5)</label>
    <div class="row">
      <input type="range" id="emotional" min="1" max="5" value="3" oninput="emOut.value=this.value">
      <output id="emOut">3</output>
    </div>

    <label>Mental (1â€“5)</label>
    <div class="row">
      <input type="range" id="mental" min="1" max="5" value="3" oninput="meOut.value=this.value">
      <output id="meOut">3</output>
    </div>

    <label>Spiritual (1â€“5)</label>
    <div class="row">
      <input type="range" id="spiritual" min="1" max="5" value="3" oninput="spOut.value=this.value">
      <output id="spOut">3</output>
    </div>

    <label>Overall mood</label>
    <select id="mood">
      <option>ğŸ˜€ Great</option>
      <option selected>ğŸ™‚ Okay</option>
      <option>ğŸ˜ Meh</option>
      <option>ğŸ˜Ÿ Low</option>
    </select>

    <label>Notes (optional)</label>
    <textarea id="notes" placeholder="One or two sentencesâ€¦"></textarea>

    <button id="save">Save todayâ€™s checkâ€‘in</button>
    <div id="saveStatus" class="muted"></div>
  </section>

  <section id="screen-history" class="card" hidden>
    <h2>Last 7 days</h2>
    <ul id="history" class="list"></ul>
    <div class="right muted" id="avg"></div>
  </section>

  <section id="screen-settings" class="card" hidden>
    <h2>Settings</h2>
    <div class="toggle">
      <label for="autoLockMins">Autoâ€‘lock after (minutes)</label>
      <input id="autoLockMins" type="number" min="1" max="60" value="2" style="width:80px">
    </div>
    <div class="btn-row">
      <button id="lockNow">Lock Now</button>
      <button id="changePass">Change Passcode</button>
      <button id="exportCsv">Export CSV</button>
      <button id="exportJson">Backup JSON</button>
      <button id="clearAll" style="background:#fee">Clear All Data</button>
    </div>
    <div class="muted">Data stays on this device. Passcode is stored as a salted hash, not the raw digits.</div>
  </section>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>
